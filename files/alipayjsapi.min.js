!function(e){(function(e){var t=!1,n=e.Promise;if(n){var o=null,r=null;try{r=(o=n.resolve()).then}catch(e){}o instanceof n&&"function"==typeof r&&!n.cast&&(t=!0)}return t})(e)||function(){var t,n;t=this,n=function(){"use strict";function t(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,r=void 0,a=void 0,i=function(e,t){h[o]=e,h[o+1]=t,2===(o+=2)&&(a?a(p):y())},u="undefined"!=typeof window?window:void 0,c=u||{},s=c.MutationObserver||c.WebKitMutationObserver,l=void 0===e&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<o;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;o=0}var m,v,g,b,y=void 0;function _(e,t){var n=arguments,o=this,r=new this.constructor(B);void 0===r[P]&&j(r);var a,u=o._state;return u?(a=n[u-1],i(function(){return F(u,r,a,o._result)})):L(o,r,e,t),r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(B);return D(t,e),t}l?y=function(){return process.nextTick(p)}:s?(v=0,g=new s(p),b=document.createTextNode(""),g.observe(b,{characterData:!0}),y=function(){b.data=v=++v%2}):f?((m=new MessageChannel).port1.onmessage=p,y=function(){return m.port2.postMessage(0)}):y=void 0===u&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(p)}:d()}catch(e){return d()}}():d();var P=Math.random().toString(36).substring(16);function B(){}var A=void 0,C=1,S=2,k=new N;function T(e){try{return e.then}catch(e){return k.error=e,k}}function E(e,n,o){var r,a,u,c;n.constructor===e.constructor&&o===_&&n.constructor.resolve===w?(u=e,(c=n)._state===C?x(u,c._result):c._state===S?M(u,c._result):L(c,void 0,function(e){return D(u,e)},function(e){return M(u,e)})):o===k?(M(e,k.error),k.error=null):void 0===o?x(e,n):t(o)?(r=n,a=o,i(function(e){var t=!1,n=function(e,t,n,o){try{e.call(t,n,o)}catch(e){return e}}(a,r,function(n){t||(t=!0,r!==n?D(e,n):x(e,n))},function(n){t||(t=!0,M(e,n))},e._label);!t&&n&&(t=!0,M(e,n))},e)):x(e,n)}function D(e,t){var n;e===t?M(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?E(e,t,T(t)):x(e,t)}function I(e){e._onerror&&e._onerror(e._result),R(e)}function x(e,t){e._state===A&&(e._result=t,e._state=C,0!==e._subscribers.length&&i(R,e))}function M(e,t){e._state===A&&(e._state=S,e._result=t,i(I,e))}function L(e,t,n,o){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+C]=n,r[a+S]=o,0===a&&e._state&&i(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,a=e._result,i=0;i<t.length;i+=3)o=t[i],r=t[i+n],o?F(n,o,r,a):r(a);e._subscribers.length=0}}function N(){this.error=null}var O=new N;function F(e,n,o,r){var a=t(o),i=void 0,u=void 0,c=void 0,s=void 0;if(a){if((i=function(e,t){try{return e(t)}catch(e){return O.error=e,O}}(o,r))===O?(s=!0,u=i.error,i.error=null):c=!0,n===i)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else i=r,c=!0;n._state!==A||(a&&c?D(n,i):s?M(n,u):e===C?x(n,i):e===S&&M(n,i))}var V=0;function j(e){e[P]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function z(e,t){this._instanceConstructor=e,this.promise=new e(B),this.promise[P]||j(this.promise),n(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}function U(e){this[P]=V++,this._result=this._state=void 0,this._subscribers=[],B!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof U?function(e,t){try{t(function(t){D(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return z.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===A&&n<e;n++)this._eachEntry(t[n],n)},z.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===w){var r=T(e);if(r===_&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===U){var a=new n(B);E(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},z.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===A&&(this._remaining--,e===S?M(o,n):this._result[t]=n),0===this._remaining&&x(o,this._result)},z.prototype._willSettleAt=function(e,t){var n=this;L(e,void 0,function(e){return n._settledAt(C,t,e)},function(e){return n._settledAt(S,t,e)})},U.all=function(e){return new z(this,e).promise},U.race=function(e){var t=this;return n(e)?new t(function(n,o){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,o)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},U.resolve=w,U.reject=function(e){var t=new this(B);return M(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){i=e},U._asap=i,U.prototype={constructor:U,then:_,catch:function(e){return this.then(null,e)}},U.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if(void 0!==e)t=e;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===o&&!n.cast)return}t.Promise=U},U.Promise=U,U.polyfill(),U},"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.ES6Promise=n()}()}(self),function(e){"use strict";var t,n,o="AlipayJSBridge",r=e[o],a=navigator.userAgent||navigator.swuserAgent,i="apm-h5",u=e.window,c=e.document,s=e.console,l=e.parseInt,f=[],d={getBAPSI:{isListening:!1,lastState:2,on:function(){d.getBAPSI.isListening||(r.call("startMonitorBackgroundAudio"),d.getBAPSI.isListening=!0,p.on("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener))},off:function(){p.off("getBackgroundAudioPlayedStateInfo",d.getBAPSI.listener),r.call("stopMonitorBackgroundAudio"),d.getBAPSI.isListening=!1},listener:function(e){var t=(e.data||{}).status,n=["backgroundAudioPause","backgroundAudioPlay","backgroundAudioStop"][t];n&&t!==d.getBAPSI.lastState&&(p.trigger(n),d.getBAPSI.lastState=t)}}},h={openBluetoothAdapter:{},closeBluetoothAdapter:{},getBluetoothAdapterState:{},startBluetoothDevicesDiscovery:{b:function(e){return z(e._)&&(e._=[e._]),S(e,{_:"services"}),e}},stopBluetoothDevicesDiscovery:{},getBluetoothDevices:{b:function(e){return z(e._)&&(e._=[e._]),S(e,{_:"services"}),e},a:function(e){return q(e.devices)&&L(e.devices,function(e,t){S(t,{manufacturerData:"advertisData"})}),e}},getConnectedBluetoothDevices:{a:function(e){return q(e.devices)&&L(e.devices,function(e,t){S(t,{manufacturerData:"advertisData"})}),e}},connectBLEDevice:{b:function(e){return S(e,{_:"deviceId"}),e}},disconnectBLEDevice:{},writeBLECharacteristicValue:{},readBLECharacteristicValue:{},notifyBLECharacteristicValueChange:{},getBLEDeviceServices:{b:function(e){return S(e,{_:"deviceId"}),e}},getBLEDeviceCharacteristics:{},onBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},offBLECharacteristicValueChange:{m:"BLECharacteristicValueChange"},onBluetoothAdapterStateChange:{},offBluetoothAdapterStateChange:{},onBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},offBLEConnectionStateChanged:{m:"BLEConnectionStateChanged"},onBluetoothDeviceFound:{a:function(e){return S(e,{manufacturerData:"advertisData"})}},offBluetoothDeviceFound:{},pushBizWindow:{},compressImage:{b:function(e){return e.level=F(e.level)?4:e.level,S(e,{_:"apFilePaths",level:"compressLevel%d"})},d:function(e,t){N()?r.call("compressImage",e,t):v(t,{apFilePaths:e.apFilePaths||[]})}},getLaunchParams:{d:function(e,t){p.launchParams=u.ALIPAYH5STARTUPPARAMS||r.startupParams||{},j(t)&&t(p.launchParams)}},onTabClick:{},offTabClick:{},onShare:{m:"onShare"},offShare:{m:"onShare"},connectSocket:{b:function(e){return S(e,{headers:"header"})}},sendSocketMessage:{b:function(e){return S(e,{_:"data"})}},closeSocket:{},onSocketOpen:{},offSocketOpen:{},onSocketMessage:{},offSocketMessage:{},onSocketError:{},offSocketError:{},onSocketClose:{},offSocketClose:{},alert:{b:function(e){return F((e=S(e,{_:"content",content:"message%s",buttonText:"button%s"})).title)||(e.title=C("%s",e.title)),e}},confirm:{b:function(e){return F((e=S(e,{_:"content%s",content:"message%s",confirmButtonText:"okButton%s",cancelButtonText:"cancelButton%s"})).title)||(e.title=C("%s",e.title)),e},a:function(e){return S(e,{ok:"confirm"})}},showToast:{m:"toast",b:function(e){return S(e,{_:"content%s"}),z(e.content)||(e.content=C("%s",e.content)),e}},hideToast:{},showLoading:{b:function(e){return S(e,{_:"content",content:"text%s"})}},hideLoading:{},showNavigationBarLoading:{m:"showTitleLoading"},hideNavigationBarLoading:{m:"hideTitleLoading"},setNavigationBar:{b:function(e){var t="setTitle",n="setTitleColor",o="setBarBottomLineColor",r={setTitle:{},setTitleColor:{},setBarBottomLineColor:{}};return r[t]=S(r[t],{_:"title",title:"title%s",image:"image%b"},e),r[n]=S(r[n],{backgroundColor:"color%c",reset:"reset"},e),r[o]=S(r[o],{borderBottomColor:"color%c"},e),r},d:function(e,t){var n="setTitle",o="setTitleColor",a="setBarBottomLineColor",i={};W(e[n])||r.call(n,e[n]),W(e[a])||(r.call(a,e[a]),V(e[a].color)&&(i.error=2,i.errorMessage="颜色值不合法")),W(e[o])?v(t,i):r.call(o,e[o],function(e){i=Q(e,i),t(i)})}},showTabBar:{b:function(e){if(e.action="create",e.activeIndex=e.activeIndex||0,S(e,{color:"textColor%c",activeColor:"selectedColor%c",activeIndex:"selectedIndex%d"}),q(e.items)){var t=e.items;e.items=[],t.forEach(function(t,n){(t=S(Q({},t),{title:"name%s",tag:"tag%s",icon:"icon%b",activeIcon:"activeIcon%b",badge:"redDot%s"},{tag:n,badge:F(t.badge)?"-1":t.badge})).icon=C("%b",t.icon),t.activeIcon=C("%b",t.activeIcon),e.items.push(t)})}return e},d:function(e,t,n){var o="showTabBar";F(d.showTabBar)?d.showTabBar={opt:n}:s.error(o+" must be called at most once"),p.on("tabClick",function(e){var n={};S(n,{tag:"index%d"},{tag:U(e.data)&&e.data.tag?e.data.tag:"0"}),t(n)}),r.call("tabBar",e,function(e){B(o,e)})}},setTabBarBadge:{m:"tabBar",b:function(e){return e.action="redDot",S(e,{index:"tag%s",badge:"redDot%s"},{index:e.index}),e}},showActionSheet:{m:"actionSheet",b:function(e){if(S(e,{items:"btns",cancelButtonText:"cancelBtn%s"}),q(e.btns)){var t=e.btns;e.btns=[],t.forEach(function(t){return e.btns.push(t+"")})}return F(e.cancelBtn)&&(e.cancelBtn="取消"),e},a:function(e,t){return q(t.btns)&&e.index===t.btns.length&&(e.index=-1),e}},redirectTo:{b:function(e){return S(e,{_:"url"}),U(e.data)&&(e.url=x(e.url,e.data)),e},d:function(e){e.url&&u.location.replace(e.url)}},pushWindow:{b:function(e){return S(e,{_:"url",params:"param"}),e.url.indexOf("?")>-1&&s.warn("try opt.data instead of querystring"),e.url.indexOf("__webview_options__")>-1&&s.warn("try opt.params instead of __webview_options__"),U(e.data)&&(e.url=x(e.url,e.data),delete e.data),e}},popWindow:{b:function(e){return U((e=g(e)).data)||(e.data={___forResume___:e.data}),e}},popTo:{b:function(e){var t;return S(e,{_:(t=void 0,H(e._)&&(t="index"),z(e._)&&(t="urlPattern"),t)}),U(e.data)||(e.data={___forResume___:e.data}),e}},allowPullDownRefresh:{d:function(e){var t="onPullDownRefresh";S(e,{_:"allow"}),e.allow=!!F(e.allow)||!!e.allow,U(d[t])?d[t].allow=e.allow:(d[t]={allow:e.allow},p.onPullDownRefresh()),d[t].allow?r.call("restorePullToRefresh"):d[t].event&&d[t].event.preventDefault()}},choosePhoneContact:{m:"contact"},chooseAlipayContact:{m:"chooseContact",b:function(e){return S(e,{_:"count"}),F(e.count)&&(e.count=1),1===e.count?e.type="single":(e.type="multi",e.count<=0||e.count>10?e.multiMax=10:e.multiMax=e.count),delete e.count,e},a:function(e){return q(e.contacts)&&e.contacts.forEach(function(e){S(e,{headImageUrl:"avatar",name:"realName"}),delete e.from}),e}},share:{b:function(e){var t={},n={};return t.onlySelectChannel=["ALPContact","ALPTimeLine","ALPCommunity","Weibo","DingTalkSession","SMS","Weixin","WeixinTimeLine","QQ","QQZone"],M(e,"bizType")&&(t.bizType=e.bizType),delete(n=Q({},e)).bizType,delete n.onlySelectChannel,S(n,{image:"imageUrl"}),d.share={startShare:t,shareToChannel:n},e},d:function(e,t){!1===e.showToolBar&&r.call("setToolbarMenu",{menus:[],override:!0}),r.call("startShare",d.share.startShare,function(e){var n=d.share.shareToChannel;e.channelName?r.call("shareToChannel",{name:e.channelName,param:n},t):t(e)})}},datePicker:{b:function(e){switch(S(e,{_:"formate",formate:"mode",currentDate:"beginDate",startDate:"minDate",endDate:"maxDate"}),e.mode){case"HH:mm:ss":e.mode=0;break;case"yyyy-MM-dd":e.mode=1;break;case"yyyy-MM-dd HH:mm:ss":e.mode=2;break;default:e.mode=1}return e},a:function(e){return z(e.date)&&(e.date=e.date.replace(/\//g,"-").trim()),e}},chooseCity:{m:"getCities",b:function(e){var t,n;function o(e){var t;return q(e)&&(t=[],e.forEach(function(e){t.push(S({},{city:"name",adCode:"adcode%s",spell:"pinyin"},e))}),e=t),e}return S(e,{showHotCities:"needHotCity",cities:"customCities",hotCities:"customHotCities"}),!0===e.showLocatedCity?(e.currentCity="",e.adcode=""):(delete e.currentCity,delete e.adcode),delete e.showLocatedCity,t=e.customCities,F(e.customCities)||(e.customCities=o(t)),n=e.customHotCities,F(e.customHotCities)||(e.customHotCities=o(n)),e},a:function(e){return S(e,{adcode:"adCode"}),e}},onBack:{a:function(e){var t={},n="onBack";return U(d[n])?d[n].event=e:d[n]={event:e,allowButton:!0},!1===d[n].allowButton&&e.preventDefault(),t.backAvailable=d[n].allowButton,t},e:{handleEventData:!1}},offBack:{},onResume:{a:function(e){var t={};return F(e.data)||(t.data=e.data),M(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offResume:{},onPause:{},offPause:{},onPageResume:{a:function(e){var t={};return F(e.data)||(t.data=e.data),M(e.data,"___forResume___")&&(t.data=e.data.___forResume___),t},e:{handleEventData:!1}},offPageResume:{},onPagePause:{},offPagePause:{},onTitleClick:{},offTitleClick:{},onPullDownRefresh:{m:"firePullToRefresh",a:function(e){var t={},n="onPullDownRefresh";return U(d[n])?d[n].event=e:d[n]={event:e,allow:!0},!1===d[n].allow&&d[n].event.preventDefault(),t.refreshAvailable=d[n].allow,t},e:{handleEventData:!1}},offPullDownRefresh:{m:"firePullToRefresh"},onNetworkChange:{d:function(e,t,n,o){var r=function(){return p.getNetworkType(t)};y("h5NetworkChange",o,r),p.on("h5NetworkChange",r)}},offNetworkChange:{d:function(e,t,n,o){_("h5NetworkChange",o)}},onAccelerometerChange:{b:function(){r.call("watchShake",{monitorAccelerometer:!0})},a:function(e){var t={};return S(t,{x:"x",y:"y",z:"z"},U(e.data)?e.data:e),t},e:{handleEventData:!1}},offAccelerometerChange:{b:function(){r.call("watchShake",{monitorAccelerometer:!1})}},onCompassChange:{b:function(){r.call("watchShake",{monitorCompass:!0})},a:function(e){var t={};return S(t,{direction:"direction"},U(e.data)?e.data:e),t},e:{handleEventData:!1}},offCompassChange:{b:function(){r.call("watchShake",{monitorCompass:!1})}},onBackgroundAudioPlay:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPlay:{},onBackgroundAudioPause:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioPause:{},onBackgroundAudioStop:{b:function(e){return d.getBAPSI.on(),e}},offBackgroundAudioStop:{},onAppResume:{},offAppResume:{},onAppPause:{},offAppPause:{},getNetworkType:{a:function(e){return F(e.networkInfo)||(e.networkType=function(e){z(e)&&(e=e.toUpperCase());return e}(e.networkInfo)),delete e.err_msg,delete e.networkInfo,e}},scan:{b:function(e){return S(e,{_:"type"}),e.type=e.type||"qr",e},a:function(e){return(e.qrCode||e.barCode)&&(e.code=e.qrCode||e.barCode,delete e.qrCode,delete e.barCode),e}},watchShake:{b:function(e){return W(e)&&(e=null),e}},getLocation:{b:function(e){return S(e,{accuracy:"horizontalAccuracy",type:"requestType%d"}),F(e.requestType)&&(e.requestType=2),N()&&(F(e.isHighAccuracy)&&(e.isHighAccuracy=!0),F(e.isNeedSpeed)&&(e.isNeedSpeed=!0)),e},a:function(e){return S(e,{citycode:"cityCode",adcode:"adCode"}),F(e.city)&&e.province&&(e.city=e.province),e.latitude&&(e.latitude=C("%s",e.latitude)),e.longitude&&(e.longitude=C("%s",e.longitude)),e.accuracy&&(e.accuracy=C("%f",e.accuracy)),e.speed&&(e.speed=C("%f",e.speed)),e}},getSystemInfo:{a:function(e){var t="pixelRatio",n="windowWidth",o="windowHeight",r="language";if(!M(e,"error")){e[t]=C("%f",e[t]),e[n]=C("%d",e[n]),e[r]=(e[r]||"").replace(/\s?\w+\/((?:\w|-)+)$/,"$1"),e[o]=C("%d",e[o]);try{O()&&p.compareVersion("10.0.12")<0&&(e[o]=u.screen.height-64)}catch(e){}}return e}},vibrate:{},getServerTime:{},previewImage:{m:"imageViewer",b:function(e){return S(e,{_:"urls",current:"init%d"}),F(e.init)&&(e.init=0),e.images=[],(e.urls||[]).forEach(function(t){e.images.push({u:t})}),delete e.urls,e}},chooseImage:{b:function(e){return S(e,{_:"count%d"}),F(e.count)&&(e.count=1),z(e.sourceType)&&(e.sourceType=[e.sourceType]),e},a:function(e){return S(e,{errorCode:"error",errorDesc:"errorMessage",localIds:"apFilePaths",tempFilePaths:"apFilePaths"}),delete e.scene,delete e.localIds,delete e.tempFilePaths,z(e.apFilePaths)&&(e.apFilePaths=R(e.apFilePaths)),e}},chooseVideo:{b:function(e){return S(e,{_:"maxDuration%d"}),z(e.sourceType)&&(e.sourceType=[e.sourceType]),z(e.camera)&&(e.camera=[e.camera]),e},a:function(e){switch(S(e,{errorCode:"error",errorDesc:"errorMessage",msg:"errorMessage",localId:"apFilePath",tempFilePath:"apFilePath",tempFile:"apFilePath"}),delete e.localId,delete e.tempFilePath,delete e.tempFile,e.error){case 0:delete e.error;break;case 1:e.error=2;break;case 2:e.error=10;break;case 3:e.error=11;break;case 4:e.error=12}return e}},uploadFile:{b:function(e){var t;return S(e,{headers:"header",fileName:"name",fileType:"type"}),t=e.filePath,/^[a-z0-9|]+$/i.test(t)&&(e.localId=e.filePath,delete e.filePath),e},a:function(e){return 2===e.error&&(e.error=11),e}},saveImage:{b:function(e,t){return S(e,{_:"url",url:"src"}),j(t)&&(e.cusHandleResult=!0),e}},downloadFile:{b:function(e){return S(e,{headers:"header"}),e},a:function(e){return S(e,{tempFilePath:"apFilePath",errorCode:"error"}),delete e.tempFilePath,e}},setSessionData:{b:function(e){return U((e=g(e)).data)||(e.data={data:e.data}),L(e.data,function(t,n){e.data[t]=JSON.stringify(n)}),e}},getSessionData:{b:function(e){return z(e._)&&(e.keys=[e._]),q(e._)&&(e.keys=e._),delete e._,e},a:function(e){return L(e.data,function(t,n){e.data[t]=R(n)}),e}},startBizService:{b:function(e){return S(e,{_:"name",params:"param%s"}),e}},tradePay:{b:function(e){return S(e,{_:"orderStr"}),e}},getAuthCode:{b:function(e){return S(e,{_:"scopes"}),z(e.scopes)?e.scopeNicks=[e.scopes]:q(e.scopes)?e.scopeNicks=e.scopes:e.scopeNicks=["auth_base"],delete e.scopes,e},a:function(e){return S(e,{authcode:"authCode"}),e}},getAuthUserInfo:{a:function(e){return S(e,{nick:"nickName",userAvatar:"avatar"}),e}},openInBrowser:{b:function(e){return S(e,{_:"url"})}},openLocation:{b:function(e){return F(e.scale)&&(e.scale=15),e}},showPopMenu:{b:function(e){if(S(e,{_:"items",items:"menus"}),U(d.showPopMenu)?d.showPopMenu.menus={}:d.showPopMenu={menus:{}},q(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(t,n){z(t)&&(t={title:t}),F((t=S(Q({},t),{title:"name%s",tag:"tag%s",badge:"redDot%s"},{tag:n,title:t.title,badge:F(t.badge)?"-1":t.badge})).icon)||(t.icon=C("%b",t.icon)),e.menus.push(t),d.showPopMenu.menus[t.name]=n})}return e},d:function(e,t){var n="showPopMenu";!0!==d.showPopMenu.onEvent&&(d.showPopMenu.onEvent=!0,p.on("popMenuClick",function(e){var n={};S(n,{title:"index%d"},{title:U(e.data)&&e.data.title?d.showPopMenu.menus[e.data.title]:"-1"}),t(n)})),r.call(n,e,function(e){B(n,e)})}},setOptionButton:{m:"setOptionMenu",b:function(e){if(z(e._)&&(e.title=e._,delete e._),q(e._)&&(e.items=e._,delete e._),S(e,{items:"menus",type:"iconType",badge:"redDot%s"}),F(e.icon)||(e.icon=C("%b",e.icon)),U(d.setOptionButton)?d.setOptionButton.menus=[]:d.setOptionButton={menus:[]},q(e.menus)){var t=e.menus;e.menus=[],t.forEach(function(n,o){F((n=S(Q({},n),{type:"icontype",badge:"redDot%s"},{badge:F(n.badge)?"-1":n.badge})).icon)||(n.icon=C("%b",n.icon)),e.menus.unshift(n),d.setOptionButton.menus[t.length-1-o]=o}),e.menus.length>0&&F(e.override)&&(e.override=!0)}if(j(d.setOptionButton.onEvent)&&p.off("optionMenu",d.setOptionButton.onEvent),j(e.onClick)){var n=e.onClick,o=function(e){var t=0,o={};U(e.data)&&H(e.data.index)&&d.setOptionButton.menus.length>0&&(t=d.setOptionButton.menus[e.data.index]),o.index=C("%d",t),n(o)};d.setOptionButton.onEvent=o,!0!==e.reset&&p.on("optionMenu",o),delete e.onClick}return e},d:function(e,t){r.call("setOptionMenu",e,t),O()&&v(t,{}),p.showOptionButton()}},showOptionButton:{m:"showOptionMenu"},hideOptionButton:{m:"hideOptionMenu"},showBackButton:{},hideBackButton:{},allowBack:{d:function(e){var t="onBack";S(e,{_:"allowButton"}),e.allowButton=!!F(e.allowButton)||!!e.allowButton,"boolean"==typeof e.allowGesture&&r.call("setGestureBack",{val:e.allowGesture}),U(d[t])?d[t].allowButton=e.allowButton:(d[t]={allowButton:e.allowButton},p.onBack()),!1===e.allowButton&&d[t].event&&d[t].event.preventDefault()}},startRecord:{m:"startAudioRecord",b:function(e){return S(e,{maxDuration:"maxRecordTime%f",minDuration:"minRecordTime%f",bizType:"business"},{maxDuration:e.maxDuration||60,minDuration:e.minDuration||1}),F(e.business)&&(e.business=i),e},a:function(e){return S(e,{tempFilePath:"apFilePath",identifier:"apFilePath"}),e}},stopRecord:{m:"stopAudioRecord"},cancelRecord:{m:"cancelAudioRecord"},playVoice:{m:"startPlayAudio",b:function(e){return S(e,{_:"filePath",filePath:"identifier",bizType:"business"}),F(e.business)&&(e.business=i),e},a:function(e){return S(e,{identifier:"filePath"}),e}},pauseVoice:{m:"pauseAudioPlay"},resumeVoice:{m:"resumeAudioPlay"},stopVoice:{m:"stopAudioPlay"},makePhoneCall:{d:function(e,t){var n="tel:";S(e,{_:"number"}),n+=e.number,r.call("openInBrowser",{url:n},t)}},playBackgroundAudio:{b:function(e){return S(e,{_:"url",url:"audioDataUrl%s",title:"audioName%s",singer:"singerName%s",describe:"audioDescribe%s",logo:"audioLogoUrl%s",cover:"coverImgUrl%s",bizType:"business"},{bizType:e.bizType||i}),e},a:function(e){return S(e,{describe:"errorMessage"}),A(e,12,0),e}},pauseBackgroundAudio:{a:function(e){return S(e,{describe:"errorMessage"}),A(e,12,0),e}},stopBackgroundAudio:{a:function(e){return S(e,{describe:"errorMessage"}),A(e,12,0),e}},seekBackgroundAudio:{b:function(e){return S(e,{_:"position",bizType:"business"},{bizType:e.bizType||i}),e.position=C("%f",e.position),e},a:function(e){return S(e,{describe:"errorMessage"}),A(e,12,0),e}},getBackgroundAudioPlayerState:{a:function(e){return S(e,{audioDataUrl:"url",describe:"errorMessage"}),A(e,12,0),e}}},p={version:"3.1.0",ua:a,isAlipay:E(/AlipayClient/),alipayVersion:(n=a.match(/AlipayClient[a-zA-Z]*\/(\d+(?:\.\d+)+)/),n&&n.length?n[1]:""),compareVersion:function(e){var t=p.alipayVersion.split(".");e=e.split(".");for(var n,o,r=0;r<t.length;r++){if((n=l(e[r],10)||0)>(o=l(t[r],10)||0))return-1;if(n<o)return 1}return 0},parseQueryString:function(e){var t,n={},o=e||u.location.search,r={true:!0,false:!1};o=(o=0===o.indexOf("?")?o.substr(1):o)?o.split("&"):"";for(var a=0;a<o.length;a++)(t=o[a].split("="))[1]=decodeURIComponent(t[1]),t[1]=F(r[t[1]])?t[1]:r[t[1]],n[t[0]]=t[1];return k("parseQueryString"),n},enableDebug:function(){p.debug=!0},on:function(e,t){var n="ready"===e;n||"back"===e?c.addEventListener(n?o+"Ready":e,t,!1):(e=e.replace(/ready/,o+"Ready")).split(/\s+/g).forEach(function(e){c.addEventListener(e,t,!1)})},off:function(e,t){c.removeEventListener(e,t,!1)},trigger:function(e,t){var n=c.createEvent("Events");return n.initEvent(e,!1,!0),n.data=t||{},c.dispatchEvent(n),n},ready:function(e){if(I())return new Promise(t);function t(t){m()?(j(e)&&e(),j(t)&&t()):p.on("ready",function(){m(),j(e)&&e(),j(t)&&t()})}t()},call:function(){var e=$(arguments);if(I())return p.ready().then(function(){return new Promise(t)});function t(t,n){var o,a,i,u,c,l,f,d,m,v,g,b,A;o=e[0]+"",a=e[1],F(i=e[2])&&j(a)&&(i=a,a={}),!U(a)&&e.length>=2&&(a={_:a}),F(a)&&(a={}),u=function(e,t,n){var o=h[e],r=o&&o.b?o.b(Q({},t),n):t,a=P(e,"optionModifier");if(j(a)){var i=a(r,n);U(i)&&(r=i)}return r}(o,a,i),c=function(e,t){var n={};j((t=t||{}).success)&&(n.success=t.success,delete t.success);j(t.fail)&&(n.fail=t.fail,delete t.fail);j(t.complete)&&(n.complete=t.complete,delete t.complete);return n}(0,u),F(u)&&s.error("please confirm "+o+".before() returns the options."),m=!(!(g=h[o])||!g.d)&&g.d,v=M(a,"_")?a._:a,T(o,v,u),f=w("on",o),d=w("off",o),l=function(e){var r=void 0;e=e||{},f&&!1!==P(o,"handleEventData")&&(r=function(e){var t={};F(e.data)||(t=U(t=e.data)?t:{data:t});return t}(e)),F(r=function(e,t,n,o,r){var a=h[e],i=a&&a.a?a.a((c=t,"[object Event]"===J(c)?t:Q({},t)),n,o,r):Q({},t),u=P(e,"resultModifier");var c;if(j(u)){var s=u(i,n,o,r);U(s)&&(i=s)}return i}(o,r||e,u,a,i))&&s.error("please confirm "+o+".after() returns the result."),r=B(o,r),T(o,v,u,e,r),M(r,"error")||M(r,"errorMessage")?(j(n)&&n(r),j(c.fail)&&c.fail(r)):(j(t)&&t(r),j(c.success)&&c.success(r)),j(c.complete)&&c.complete(r),j(i)&&i(r)},j(m)?m(u,l,a,i):f?(y(f,i,l,c),p.on(f,l)):d?_(d,i):r.call((A=h[b=o])&&A.m?A.m:b,u,l),k(o)}m()?t():f.push(e)},extendJSAPI:function(e,t){!t&&z(e)&&(e=[e]),L(e,function(n){var o=n;if(!0!==t){var r=e[o];j(r)&&(r={doing:r}),z(r)&&(o=r,(r={})[o]={}),h[o]=S(h[o]||{},{mapping:"m",before:"b",doing:"d",after:"a"},r),U(r.extra)&&(h[o].e=h[o].e||{},h[o].e=Q(h[o].e,r.extra))}p[o]=p.call.bind(null,o)},!0)}};function m(){return(r=r||e[o])&&r.call}function v(e,t){setTimeout(function(){e(t)},1)}function g(e,t){var n=!1;return t=t||"data",M(e,"_")?(e[t]=e._,delete e._):(L(e,function(e){e!==t&&(n=!0)}),n&&(n=e,(e={})[t]=n)),e}function b(e,t,n){var o,r=!1;return F(e)||(d.EVENTS||(d.EVENTS={}),d.EVENTS[e]||(d.EVENTS[e]={callbacks:[]}),d.EVENTS[e].callbacks||(d.EVENTS[e].callbacks=[]),d.EVENTS[e].callbacks.forEach(function(e,n){e.cb===t&&(r=e,o=n)}),n&&H(o)&&d.EVENTS[e].callbacks.splice(o,1)),r}function y(e,t,n,o){b(e,t)||d.EVENTS[e].callbacks.push({cb:t,_cb:n,_cbSFC:o})}function _(e,t){var n=b(e,t,!0);j(t)?n&&p.off(e,n._cb):(d.EVENTS[e].callbacks.forEach(function(t){p.off(e,t._cb)}),d.EVENTS[e].callbacks=[])}function w(e,t){var n=h[t],o=!1,r="off"===e?/^off([A-Z])(\w+)/:/^on([A-Z])(\w+)/;return n&&r.test(t)&&(t=t.match(r),!(o=n.m)&&t[1]&&t[2]&&(o=function(e){z(e)&&(e=e.toLowerCase());return e}(t[1])+t[2])),o}function P(e,t){var n=h[e]||{};return(n.e||n.extra||{})[t]}function B(e,t){return M(t,"error")&&(t.error=l(t.error,10)),!1!==P(e,"handleResultSuccess")&&A(t),0===t.error&&(delete t.error,delete t.errorMessage),t.error>0&&t.error<10&&s.error(e,t),t}function A(e,t,n){return n=!F(n)&&n,M(e,"error")||e.success!==n||(e.error=H(t)?t:2),delete e.success,e}function C(e,t){return"%s"===e&&(t=function(e){var t=e;if(U(e)||q(e))try{t=JSON.stringify(e)}catch(e){}else t=e+"";return t}(t)),"%c"===e&&(t=function(e){var t=""+e;0===t.indexOf("#")&&(t=t.substr(1));3===t.length&&(t=t.replace(/(.)/g,"$1$1"));V(t=l(t,16))&&s.error(e+" is invalid hex color.");return t}(t)),"%b"===e&&(t=function(e){z(e)&&(e=e.replace(/^data:(\/|\w|\-|\.)+;base64,/i,""));return e}(t)),"%d"===e&&(t=l(t,10)),"%f"===e&&(t=parseFloat(t)),t}function S(e,t,n){var o;return n=n||{},L(t,function(r,a){var i,u,c;i=t[r],u=(i||"").match(/(\w+)(%\w)$/i),c={k:i},u&&(c.k=u[1],c.t=u[2]),!F(a=(o=c).k)&&(M(e,r)||M(n,r))&&F(e[a])&&(e[a]=C(o.t,F(n[r])?e[r]:n[r]),a!==r&&delete e[r])}),e}p.extendJSAPI.mapping=S,p.extendJSAPI.toType=C,p.isAlipay||s.warn("Run alipayjsapi.js in Alipay please!"),p.extendJSAPI(h,!0),p.on("ready",function(){f.length&&function e(){D(function(){var t=f.shift();p.call.apply(null,t),f.length&&e()})}()});var k=function(){var e=[],t=void 0,n=!1;function o(){setTimeout(function(){if(e.length>0){var o=e.join("|");p.ready(function(){r.call("remoteLog",{type:"monitor",bizType:"ALIPAYJSAPI",logLevel:1,actionId:"MonitorReport",seedId:"ALIPAYJSAPI_INVOKE_COUNTER",param1:o})}),p.debug&&s.info("REMOTE_LOG_QUEUE>",e),e=[]}!F(t)&&clearTimeout(t),n=!1},0)}return p.on("back",function(){o()}),function(r){e.push(r),e.length>=6?o():n||(n=!0,t=setTimeout(function(){o()},5e3))}}();function T(){var e,t,n,o,r,a,i=$(arguments);p.debug&&(e=i[0],t=i[1],n=i[2],o=i[3],r=i[4],a=[i.length>3?"RETURN>":"INVOKE>",e,M(t,"_")?t._:t,n],i.length>3&&a.push(o),i.length>4&&a.push(r),s.info(a))}function E(e){return e.test(a)}var D=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.msRequestAnimationFrame||function(e,t){u.setTimeout(function(){e(+new Date,t)},1e3/60)};function I(){if(void 0===t){var n=!1,o=e.Promise;if(o){var r=null,a=null;try{a=(r=o.resolve()).then}catch(e){}r instanceof o&&j(a)&&!o.cast&&(n=!0)}n||s.warn("try callback since no Promise detected"),t=n}return t}function x(e,t){var n,o=t;return U(t)&&(n=[],L(t,function(e,t){n.push(e+"="+encodeURIComponent(F(t)?"":t))}),o=n=n.join("&")),/\?/.test(e)?/&$/.test(e)||/\?$/.test(e)||(o="&"+o):o="?"+o,e+o}function M(e,t){return!(!U(e)&&!q(e))&&e.hasOwnProperty(t)}function L(e,t,n){var o,r,a;if(n||(!(a=e)||j(a)||!q(a)&&!H(a.length))){for(r in e)if(!1===t(r,e[r]))return e}else for(o=0;o<e.length;o++)if(!1===t(o,e[o]))return e;return e}function R(e){try{e=JSON.parse(e)}catch(t){s.warn(t,e)}return e}function N(){return E(/android/i)}function O(){return E(/iPad|iPod|iPhone|iOS/i)}function F(e){return"[object Undefined]"===J(e)}function V(e){return"NaN"===l(e,10).toString()}function j(e){return"[object Function]"===J(e)}function z(e){return"string"==typeof e}function U(e){return"[object Object]"===J(e)}function H(e){return"[object Number]"===J(e)}function q(e){return"[object Array]"===J(e)}function J(e){return Object.prototype.toString.call(e)}function W(e){for(var t in e)return!1;return!0}function $(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.length-t,o=new Array(n),r=0;r<n;r++)o[r]=e[r+t];return o}function Q(e){var t,n,o=$(arguments,1);if(!U(e))return e;for(var r=0,a=o.length;r<a;r++)for(n in t=o[r])hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}e._AP=p,"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return p}):e.ap=e.AP=p}(self);